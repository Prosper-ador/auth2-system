{"openapi":"3.1.0","info":{"title":"Auth API","description":"A secure authentication and authorization API with JWT tokens and role-based access control. Protected endpoints require Bearer token authentication.","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"paths":{"/admin/dashboard":{"get":{"tags":["protected"],"summary":"GET /admin/dashboard\nReturns system stats and list of users — only accessible by Admins.","operationId":"admin_dashboard","responses":{"200":{"description":"Admin dashboard with user stats","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Admin access required"}},"security":[{"bearer_auth":[]}]}},"/admin/register":{"post":{"tags":["protected"],"summary":"POST /admin/register\nAllows Admin to create a new Admin user.","operationId":"register_admin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Admin user created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"Bad request - Validation error"},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Admin access required"},"409":{"description":"Conflict - Email already registered"},"500":{"description":"Internal Server Error - Hash failure"}},"security":[{"bearer_auth":[]}]}},"/login":{"post":{"tags":["auth"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"401":{"description":"Invalid credentials"}}}},"/register":{"post":{"tags":["auth"],"operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"400":{"description":"Bad request"}}}},"/user/profile":{"get":{"tags":["protected"],"summary":"GET /user/profile\nReturns the authenticated user's profile info — accessible by both Users and Admins.","operationId":"user_profile","responses":{"200":{"description":"User profile info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}},"400":{"description":"Bad request - Invalid user ID"},"401":{"description":"Unauthorized - Invalid or missing token"},"403":{"description":"Forbidden - Authentication required"},"404":{"description":"Not Found - User not found"}},"security":[{"bearer_auth":[]}]}}},"components":{"schemas":{"LoginRequest":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"type":"object","required":["access_token","message","token_type"],"properties":{"access_token":{"type":"string"},"message":{"type":"string"},"token_type":{"type":"string"}}},"RegisterRequest":{"type":"object","required":["first_name","last_name","email","password","confirm_password"],"properties":{"confirm_password":{"type":"string"},"email":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"password":{"type":"string"}}},"RegisterResponse":{"type":"object","required":["id","first_name","last_name","email"],"properties":{"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"integer","format":"int32"},"last_name":{"type":"string"}}},"Role":{"type":"string","enum":["Admin","User"]},"User":{"type":"object","required":["id","email","first_name","last_name","password","role"],"properties":{"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"integer","format":"int32"},"last_name":{"type":"string"},"password":{"type":"string"},"role":{"$ref":"#/components/schemas/Role"}}},"UserResponse":{"type":"object","required":["id","email","first_name","last_name","role"],"properties":{"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"integer","format":"int32"},"last_name":{"type":"string"},"role":{"$ref":"#/components/schemas/Role"}}}}},"tags":[{"name":"auth","description":"Authentication endpoints"},{"name":"protected","description":"Protected endpoints requiring Bearer token authentication"}]}